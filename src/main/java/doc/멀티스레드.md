# 멀티 쓰레드

### 스레드

- 코드 한 줄 한 줄 실행 되는 작업 단위

서블릿 객체는 스레드가 생성시킨다.

WAS에서 멀티스레드를 관리하기 때문에 개발자는 싱글 스레드 같이 코드를 작성만 하면 된다.

- 단일 스레드 인 경우엔 다중 요청에 대응을 하지 못한다.
- 멀티 스레드 환경에서 다중 요청을 대응할 수 있다.
- 매 요청마다 스레드를 생성하는 것은 어떨까?
- 스레드 생성 비용이 크고 , 스레드 간 이동 시 컨텍스트 스위칭 비용이 발생하기 때문에 좋지 않다. 또한 매 요청 마다 스레드를 생성하기 때문에 매우 많은 요청이 들어올 경우 메모리 부족으로 인해 프로그램이 다운될 수 있다.

### 스레드 풀

- WAS는 스레드풀을 이용하여 스레드를 관리한다.
- 스레드풀이란 정해진 스레드 양을 생성하여 필요시 사용하고 스레드 풀에서 대기하는 형태
- 스레드 갯수는 WAS 설정 혹은 스프링부트 설정에서 정할 수 있다.

### 성능 테스트

- 스레드 풀을 적정하게 설정을 할 줄 알아야 한다.
- 운영 환경과 비슷한 환경에서 성능 테스트를 진행할 수 있다.
- Jmeter , nGrinder를 사용